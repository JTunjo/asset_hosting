<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tunjo Smart Guestbook</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f2f7f3; text-align: center; padding: 30px; }
    h1 { color: #2c6e49; }
    form { max-width: 400px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; }
    input, textarea, button { width: 100%; margin: 10px 0; padding: 10px; }
    button { background: #2c6e49; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #1f4c33; }
  </style>
</head>
<body>
  <h1>üå± Guestbook para un Futuro Sostenible</h1>
  <form id="guestForm">
    <input type="text" name="name" placeholder="Tu Nombre" required>
    <input type="file" name="photo" accept="image/*" capture="environment" required>
    <textarea name="wish" placeholder="Comparte tus deseos para un mundo m√°s sostenible..." required></textarea>
    <button type="submit">¬°Enviar!</button>
  </form>

  <p id="status"></p>

  <script>
    const scriptURL = "YOUR_GOOGLE_APPS_SCRIPT_URL"; // will create in Step 3
    const form = document.getElementById("guestForm");
    const status = document.getElementById("status");

    form.addEventListener("submit", async e => {
      e.preventDefault();
      status.textContent = "Submitting...";
      
      const formData = new FormData(form);
      const file = formData.get("photo");
      
      // Convert image to Base64
      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64Image = reader.result;
        const data = {
          name: formData.get("name"),
          wish: formData.get("wish"),
          photo: base64Image
        };

        const response = await fetch(scriptURL, {
          method: "POST",
          body: JSON.stringify(data)
        });

        if (response.ok) {
          status.textContent = "‚úÖ Thank you for sharing!";
          form.reset();
        } else {
          status.textContent = "‚ö†Ô∏è Error, please try again.";
        }
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>
